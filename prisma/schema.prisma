// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Modelo de sesiones con API key en texto plano
model Session {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  apiKey     String    @unique @map("api_key") @db.VarChar(64)
  sessionName String?  @map("session_name") @db.VarChar(100)
  status     String    @default("active") @db.VarChar(10)
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt  DateTime  @default(now()) @map("updated_at") @db.Timestamptz()
  lastUsedAt DateTime? @map("last_used_at") @db.Timestamptz()
  revokedAt  DateTime? @map("revoked_at") @db.Timestamptz()

  @@index([apiKey], name: "idx_sessions_api_key")
  @@index([status], name: "idx_sessions_status")
  @@map("sessions")
}
